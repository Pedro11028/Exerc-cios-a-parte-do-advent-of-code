package com.mycompany.jogogalo;

import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import static java.lang.Double.min;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import java.util.Random;

public class JogoGalo extends JFrame {

    JButton playerVSplayer = new JButton();
    JButton voltarMenu = new JButton();
    JButton playerVsbot = new JButton();
    JButton[] bt = new JButton[9];
    int contadorX_Y = 1;
    int[] validarXeY = new int[9];
    int encontrarEmpate = 0;
    int verificarEscolha = 0;

    public JogoGalo() {
        setVisible(true);
        setTitle("Jogo do galo");
        setDefaultCloseOperation(3);
        setLayout(null);
        setBounds(300, 200, 400, 400);

        playerVSplayer.setFont(new Font("Arial", Font.PLAIN, 15));
        add(playerVSplayer);
        playerVSplayer.setText("Player vs Player");

        playerVsbot.setFont(new Font("Arial", Font.PLAIN, 15));
        add(playerVsbot);
        playerVsbot.setText("Player vs bot");

        playerVSplayer.setBounds((20), (100), 150, 50);
        playerVsbot.setBounds((215), (100), 150, 50);

        playerVSplayer.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                playerVsbot.setVisible(false);
                playerVSplayer.setVisible(false);
                getContentPane().removeAll();

                voltarMenu.setFont(new Font("Calibri", Font.PLAIN, 10));
                add(voltarMenu);
                voltarMenu.setText("Voltar ao menu");
                voltarMenu.setBounds((0), (0), 100, 30);
                voltarMenu.setVisible(true);

                int butoes = 0;
                for (int i = 0; i < 3; i++) {
                    for (int j = 0; j < 3; j++) {
                        bt[butoes] = new JButton();
                        bt[butoes].setFont(new Font("Arial", Font.PLAIN, 50));
                        add(bt[butoes]);
                        bt[butoes].setBounds((100 * i) + 50, (100 * j) + 50, 95, 95);
                        validarXeY[butoes] = 0;
                        butoes++;
                    }
                }
                bt[0].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(0);
                    }
                });
                bt[1].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(1);
                    }
                });
                bt[2].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(2);
                    }
                });
                bt[3].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(3);
                    }
                });
                bt[4].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(4);
                    }
                });
                bt[5].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(5);
                    }
                });
                bt[6].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(6);
                    }
                });
                bt[7].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(7);
                    }
                });
                bt[8].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarPlayer(8);
                    }
                });

            }
            
                                private void jogarPlayer(int numeroButao) {
                        if (validarXeY[numeroButao] == 0) {
                            escreverX_Y(numeroButao);
                            validarXeY[numeroButao] = 1;
                            verificarGanhadores(8);
                        }
                    }

            private void escreverX_Y(int numeroButao) {
                if (contadorX_Y == 1) {
                    bt[numeroButao].setText("X");
                    contadorX_Y = 0;
                } else {
                    bt[numeroButao].setText("O");
                    contadorX_Y = 1;
                }
            }
        });

        playerVsbot.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                playerVsbot.setVisible(false);
                playerVSplayer.setVisible(false);
                getContentPane().removeAll();

                voltarMenu.setFont(new Font("Calibri", Font.PLAIN, 10));
                add(voltarMenu);
                voltarMenu.setText("Voltar ao menu");
                voltarMenu.setBounds((0), (0), 100, 30);
                voltarMenu.setVisible(true);

                int butoes = 0;
                for (int i = 0; i < 3; i++) {
                    for (int j = 0; j < 3; j++) {
                        bt[butoes] = new JButton();
                        bt[butoes].setFont(new Font("Arial", Font.PLAIN, 50));
                        add(bt[butoes]);
                        bt[butoes].setBounds((100 * i) + 50, (100 * j) + 50, 95, 95);
                        validarXeY[butoes] = 0;
                        butoes++;
                    }
                }
                bt[0].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(0);
                    }
                });
                bt[1].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                       jogarComBot(1);
                    }
                });
                bt[2].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(2);
                    }
                });
                bt[3].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(3);
                    }
                });
                bt[4].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(4);
                    }
                });
                bt[5].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(5);
                    }
                });
                bt[6].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(6);
                    }
                });
                bt[7].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(7);
                    }
                });
                bt[8].addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        jogarComBot(8);
                    }
                });

            }

            private void jogarComBot(int numButao) {
                int butoesRestantes = 9;
                if (validarXeY[numButao] == 0) {
                    for (int i = 0; i < 9; i++) {
                        if (bt[i].getText() == "X" || bt[i].getText() == "O") {
                            butoesRestantes -= 1;
                        } else {
                        }
                    }
                    if (butoesRestantes <= 1) {
                        escreverX_Y(numButao);
                    } else {
                        escreverX_Y(numButao);
                        escreverX_Y(numButao);
                    }
                    verificarGanhadores(4);
                }
            }

            private void escreverX_Y(int numeroButao) {
                Random rand = new Random();
                int random = 0;

                if (contadorX_Y == 1) {
                    bt[numeroButao].setText("X");
                    contadorX_Y = 0;
                    validarXeY[numeroButao] = 1;
                } else {
                    int acharButao = 0;
                    while (acharButao == 0) {
                        random = rand.nextInt(9);
                        if (bt[random].getText() != "X" & bt[random].getText() != "O") {
                            acharButao = 1;
                        }
                    }
                    validarXeY[random] = 1;
                    bt[random].setText("O");
                    contadorX_Y = 1;
                }
            }

        });

        voltarMenu.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                limparButoes();
                for (int i = 0; i < 9; i++) {
                    bt[i].setVisible(false);
                    remove(bt[i]);
                }
                voltarMenu.setVisible(false);
                remove(voltarMenu);

                playerVSplayer.setFont(new Font("Arial", Font.PLAIN, 15));
                add(playerVSplayer);
                playerVSplayer.setText("Player vs Player");
                playerVSplayer.setVisible(true);

                playerVsbot.setFont(new Font("Arial", Font.PLAIN, 15));
                add(playerVsbot);
                playerVsbot.setText("Player vs bot");
                playerVsbot.setVisible(true);

                playerVSplayer.setBounds((20), (100), 150, 50);
                playerVsbot.setBounds((215), (100), 150, 50);
            }
        });
    }

    private void verificarGanhadores(int numEmpates) {
        //Linhas horizontais na verificacao do X
        if (bt[0].getText().equals("X") && bt[3].getText().equals("X") && bt[6].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[1].getText().equals("X") && bt[4].getText().equals("X") && bt[7].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[2].getText().equals("X") && bt[5].getText().equals("X") && bt[8].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }

        //Linhas verticais na verificacao do X
        if (bt[0].getText().equals("X") && bt[1].getText().equals("X") && bt[2].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[3].getText().equals("X") && bt[4].getText().equals("X") && bt[5].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[6].getText().equals("X") && bt[7].getText().equals("X") && bt[8].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }

        //Linhas horizontais na verificacao do O
        if (bt[0].getText().equals("O") && bt[3].getText().equals("O") && bt[6].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[1].getText().equals("O") && bt[4].getText().equals("O") && bt[7].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[2].getText().equals("O") && bt[5].getText().equals("O") && bt[8].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }

        //Linhas verticais na verificacao do O
        if (bt[0].getText().equals("O") && bt[1].getText().equals("O") && bt[2].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[3].getText().equals("O") && bt[4].getText().equals("O") && bt[5].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[6].getText().equals("O") && bt[7].getText().equals("O") && bt[8].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }

        //Linhas diagonais na verificacao do X
        if (bt[0].getText().equals("X") && bt[4].getText().equals("X") && bt[8].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[2].getText().equals("X") && bt[4].getText().equals("X") && bt[6].getText().equals("X")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador X por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }

        //Linhas diagonais na verificacao do O
        if (bt[0].getText().equals("O") && bt[4].getText().equals("O") && bt[8].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }
        if (bt[2].getText().equals("O") && bt[4].getText().equals("O") && bt[6].getText().equals("O")) {
            JOptionPane.showMessageDialog(null, "Parabéns ao Jogador O por vencer!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate -= 1;
        }

        if (encontrarEmpate == numEmpates) {
            JOptionPane.showMessageDialog(null, "Ups, parece que ouve um empate!", "Resultado Jogo", JOptionPane.INFORMATION_MESSAGE);
            limparButoes();
            encontrarEmpate = 0;
        } else {
            encontrarEmpate += 1;
        }
    }

    private void limparButoes() {
        bt[0].setText("");
        bt[1].setText("");
        bt[2].setText("");
        bt[3].setText("");
        bt[4].setText("");
        bt[5].setText("");
        bt[6].setText("");
        bt[7].setText("");
        bt[8].setText("");
        validarXeY[0] = 0;
        validarXeY[1] = 0;
        validarXeY[2] = 0;
        validarXeY[3] = 0;
        validarXeY[4] = 0;
        validarXeY[5] = 0;
        validarXeY[6] = 0;
        validarXeY[7] = 0;
        validarXeY[8] = 0;

        contadorX_Y = 1;
        encontrarEmpate = 0;
    }

    public static void main(String[] args) {
        new JogoGalo();
    }
}

